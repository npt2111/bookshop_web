<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TVTBookShop - C·ª≠a h√†ng S√°ch Online</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="static/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f8f9fa, #eef2ff);
      color: #333;
      padding-top: 80px;
    }

    /* üåü Navbar */   
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      background: linear-gradient(90deg, #007bff, #6610f2);
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      color: #fff !important;
    }
    .nav-link, .btn {
      transition: 0.3s;
    }
    .btn-warning {
      background-color: #ffca28;
      border: none;
    }
    .btn-warning:hover {
      background-color: #ffc107;
    }

    /* üå∏ Hero section */
    .hero {
      text-align: center;
      padding: 60px 15px;
      background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
      color: #fff;
      border-radius: 12px;
      margin-bottom: 40px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    /* üîç Thanh t√¨m ki·∫øm + b·ªô l·ªçc */
    .search-filter {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
    }

    .search-filter input, .search-filter select {
      border-radius: 25px;
      padding: 10px 20px;
      border: 1px solid #ccc;
      outline: none;
      transition: 0.3s;
    }

    .search-filter input:focus, .search-filter select:focus {
      border-color: #007bff;
      box-shadow: 0 0 8px rgba(0,123,255,0.3);
    }

    /* üõçÔ∏è Cards */
    .card {
      border: none;
      border-radius: 15px;
      overflow: hidden;
      transition: transform 0.25s ease, box-shadow 0.25s;
      background: #fff;
      height: 100%;
    }
    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .card-img-top {
      height: 280px;
      object-fit: contain;
      background: #f8f9fa;
    }
    .card-body h5 {
      font-weight: 600;
      color: #343a40;
    }
    .price {
      font-weight: bold;
      color: #ff4081;
      font-size: 1.1rem;
    }

    /* ü¶ã Buttons */
    .btn-outline-primary, .btn-outline-info {
      border-radius: 25px;
      font-weight: 500;
    }

    .btn-outline-primary:hover {
      background-color: #007bff;
      color: white;
    }

    .btn-outline-info:hover {
      background-color: #17a2b8;
      color: white;
    }

    /* üåô Footer */
    footer {
      background: #212529;
      color: #fff;
      text-align: center;
      padding: 25px;
      margin-top: 60px;
      border-top: 3px solid #007bff;
    }
    footer strong {
      color: #ffc107;
    }
    /* üß≠ Dropdown hi·ªÉn th·ªã khi hover */
    .nav-item.dropdown:hover .dropdown-menu {
      display: block;
      margin-top: 0; /* tr√°nh b·ªã l·ªách */
      animation: fadeIn 0.2s ease-in-out;
    }

    /* ‚ú® Hi·ªáu ·ª©ng hi·ªán m∆∞·ª£t */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* üé® Trang tr√≠ th√™m */
    .dropdown-menu {
      border-radius: 10px;
      padding: 8px 0;
      background-color: #fff;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    .dropdown-item:hover {
      background-color: #f0f4ff;
      color: #0d6efd;
    }


    @media (max-width: 768px) {
      .card-img-top {
        height: 220px;
      }
    }
  </style>
</head>

<body>
  <!-- üåü Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand" href="/">üìö TVTBookShop</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item me-3">
            <a class="nav-link text-light" href="/cart">
              üõí Gi·ªè h√†ng <span class="badge bg-light text-dark" id="cart-count">{{ cart_count or 0 }}</span>
            </a>
          </li>
          {% if session.get('email') %}
          <li class="nav-item dropdown me-2">
            <a class="nav-link dropdown-toggle text-light fw-semibold d-flex align-items-center gap-2" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="{{ customer.get('avatar_url') or 'https://via.placeholder.com/30?text=User' }}" 
                   alt="Avatar" style="width:30px;height:30px;border-radius:50%;object-fit:cover;">
              {{ session.get('name', 'Kh√°ch') }}
            </a>

            <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="{{ url_for('profile') }}">H·ªì s∆° c√° nh√¢n</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a></li>
            </ul>
          </li>
          {% else %}
          <li class="nav-item dropdown me-2">
            <a class="nav-link dropdown-toggle text-light fw-semibold" href="#" id="guestDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              üë§ Kh√°ch
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="guestDropdown">
              <li><a class="dropdown-item" href="{{ url_for('login') }}">ƒêƒÉng nh·∫≠p</a></li>
              <li><a class="dropdown-item" href="{{ url_for('register') }}">ƒêƒÉng k√Ω</a></li>
            </ul>
          </li>
          {% endif %}

          {% if session.get('role') == 1 %}
          <li class="nav-item">
            <a class="btn btn-warning btn-sm fw-bold" href="{{ url_for('admin') }}">
              ‚öôÔ∏è Qu·∫£n l√Ω kho
            </a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- üå∏ Hero -->
  <section class="hero container">
    <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi TVTBookShop üìñ</h1>
    <p>Kh√°m ph√° nh·ªØng cu·ªën s√°ch hay nh·∫•t, gi√° t·ªët nh·∫•t v√† giao h√†ng nhanh ch√≥ng t·∫≠n n∆°i.</p>
  </section>

 <!-- üîç Thanh t√¨m ki·∫øm & b·ªô l·ªçc -->
<div class="container search-filter d-flex flex-wrap justify-content-between align-items-center mb-4 gap-3">
  <form class="d-flex flex-wrap gap-3 w-100 justify-content-center" method="GET">
    <input type="text" name="search" value="{{ search_query }}" placeholder="üîç T√¨m theo t√™n s√°ch ho·∫∑c t√°c gi·∫£..." class="form-control" style="max-width: 300px;">

    <select name="type" class="form-select" style="max-width: 200px;">
      <option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
      {% for t in types %}
        <option value="{{ t.name }}" {% if filter_type == t.name %}selected{% endif %}>{{ t.name }}</option>
      {% endfor %}
    </select>

    <div class="d-flex align-items-center">
      <label class="me-2 text-secondary">Gi√°:</label>
      <select name="price_range" class="form-select" style="width: 180px;">
        <option value="">T·∫•t c·∫£</option>
        <option value="20000-50000" {% if price_range == '20000-50000' %}selected{% endif %}>20.000 - 50.000 VND</option>
        <option value="50000-100000" {% if price_range == '50000-100000' %}selected{% endif %}>50.000 - 100.000 VND</option>
        <option value=">100000" {% if price_range == '>100000' %}selected{% endif %}>> 100.000 VND</option>
      </select>
    </div>


    <button type="submit" class="btn btn-primary">L·ªçc</button>
  </form>
</div>

</div>

<!-- üìò Danh s√°ch s·∫£n ph·∫©m -->
<div class="container">
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for item in products %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img src="{{ item.image_url or 'https://via.placeholder.com/250x300?text=No+Image' }}" 
             class="card-img-top"
             alt="{{ item.product }}"
             onerror="this.src='https://via.placeholder.com/250x300?text=No+Image';">
        <div class="card-body text-center">
          <h5 class="card-title">{{ item.product }}</h5>
          <p class="text-muted mb-1">T√°c gi·∫£: {{ item.author or 'ƒêang c·∫≠p nh·∫≠t' }}</p>
          <p class="text-muted mb-1">Th·ªÉ lo·∫°i: <span class="badge bg-primary">{{ item.type or 'Kh√°c' }}</span></p>
          <p class="price">{{ item.price | default(0) }} VND</p>
          <a href="{{ url_for('product_detail', product_id=item.id) }}" class="btn btn-outline-info w-75 mb-2">üîç Chi ti·∫øt</a>
          <a href="{{ url_for('add_to_cart', product_id=item.id) }}" class="btn btn-outline-primary w-75">
              üõí Th√™m v√†o gi·ªè
          </a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
<!-- üìÑ Pagination -->
<div class="container mt-4">
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      {% if page and page > 1 %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('index', page=page-1, search=search_query, type=filter_type, min=price_min, max=price_max) }}">¬´ Trang tr∆∞·ªõc</a>
        </li>
      {% endif %}

      {% for i in range(1, total_pages + 1) %}
        <li class="page-item {% if i == page %}active{% endif %}">
          <a class="page-link" href="{{ url_for('index', page=i, search=search_query, type=filter_type, min=price_min, max=price_max) }}">{{ i }}</a>
        </li>
      {% endfor %}

      {% if page < total_pages %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('index', page=page+1, search=search_query, type=filter_type, min=price_min, max=price_max) }}">Trang sau ¬ª</a>
        </li>
      {% endif %}
    </ul>
  </nav>
</div>

  <!-- üåô Footer -->
  <footer>
    <p>¬© 2025 <strong>TVTBookShop</strong> | Designed by <strong>Nguy·ªÖn Thu·∫≠n $ Muhammad Vietrang</strong></p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // // üõí Gi·ªè h√†ng demo
    // let cartCount = 0;
    // const cartBadge = document.getElementById('cart-count');
    // document.querySelectorAll('.btn-outline-primary').forEach(btn => {
    //   btn.addEventListener('click', (e) => {
    //     e.preventDefault();
    //     cartCount++;
    //     cartBadge.textContent = cartCount;
    //     alert('üìó S√°ch ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè h√†ng!');
    //   });
    // });

    
  </script>
  <!-- üé° N√∫t n·ªïi V√≤ng quay may m·∫Øn -->
  <button class="lucky-float-btn" id="openSpin">
    üéØ
  </button>
 <!-- Chatbot Toggler -->
    <button id="chatbot-toggler">
        <span class="material-symbols-rounded"><svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
                <path
                d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"
                />
            </svg></span>
        <span class="material-symbols-rounded"><i class="fa-solid fa-xmark"></i></span>
    </button>
    <div class="chatbot-popup">
        <!-- Chatbot Header -->
        <div class="chat-header">
            <div class="header-info">
            <svg class="chatbot-logo" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
                <path
                d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"
                />
            </svg>
            <h2 class="logo-text">BookBot</h2>
            </div>
            <button id="close-chatbot" class="material-symbols-rounded"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <!-- Chatbot Body -->
        <div class="chat-body">
            <div class="message bot-message">
            <svg class="bot-avatar" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024">
                <path
                d="M738.3 287.6H285.7c-59 0-106.8 47.8-106.8 106.8v303.1c0 59 47.8 106.8 106.8 106.8h81.5v111.1c0 .7.8 1.1 1.4.7l166.9-110.6 41.8-.8h117.4l43.6-.4c59 0 106.8-47.8 106.8-106.8V394.5c0-59-47.8-106.9-106.8-106.9zM351.7 448.2c0-29.5 23.9-53.5 53.5-53.5s53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5-53.5-23.9-53.5-53.5zm157.9 267.1c-67.8 0-123.8-47.5-132.3-109h264.6c-8.6 61.5-64.5 109-132.3 109zm110-213.7c-29.5 0-53.5-23.9-53.5-53.5s23.9-53.5 53.5-53.5 53.5 23.9 53.5 53.5-23.9 53.5-53.5 53.5zM867.2 644.5V453.1h26.5c19.4 0 35.1 15.7 35.1 35.1v121.1c0 19.4-15.7 35.1-35.1 35.1h-26.5zM95.2 609.4V488.2c0-19.4 15.7-35.1 35.1-35.1h26.5v191.3h-26.5c-19.4 0-35.1-15.7-35.1-35.1zM561.5 149.6c0 23.4-15.6 43.3-36.9 49.7v44.9h-30v-44.9c-21.4-6.5-36.9-26.3-36.9-49.7 0-28.6 23.3-51.9 51.9-51.9s51.9 23.3 51.9 51.9z"
                />
            </svg>
            <!-- prettier-ignore -->
            <div class="message-text"> Xin ch√†o üëã<br /> TVTBookshop c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n kh√¥ng? </div>
            </div>
        </div>
        <!-- Chatbot Footer -->
        <div class="chat-footer">
            <form action="#" class="chat-form">
            <textarea placeholder="Message..." class="message-input" required></textarea>
            <div class="chat-controls">
                <button type="button" id="emoji-picker" class="material-symbols-outlined"><i class="fa-regular fa-face-smile"></i></button>
                <div class="file-upload-wrapper">
                <input type="file" id="file-input" hidden />
                <img src="#" />
                <button type="button" id="file-upload" class="material-symbols-rounded"><i class="fa-solid fa-paperclip"></i></button>
                <button type="button" id="file-cancel" class="material-symbols-rounded"><i class="fa-solid fa-xmark"></i></button>
                </div>
                <button type="submit" id="send-message" class="material-symbols-rounded"><i class="fa-regular fa-paper-plane"></i></button>
            </div>
            </form>
        </div>
    </div>
    <!-- Popup V√≤ng quay may m·∫Øn -->
    <div id="spinBox" class="spin-modal">
      <div class="spin-content">
        <span class="close-spin">&times;</span>
        <h3 class="mb-3 text-center">üéÅ V√≤ng quay may m·∫Øn</h3>
        <canvas id="wheelCanvas" width="400" height="400"></canvas>
        <div class="arrow"></div>
        <button id="spinBtn" class="spin-btn mt-3">Quay ngay</button>
        <p id="result" class="mt-3 fw-bold text-center"></p>
      </div>
    </div>


    <!-- Linking Emoji Mart script for emoji picker -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>

    <!-- Linking for file upload functionality -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.17.2/dist/sweetalert2.all.min.js"></script>
    
    <!-- Linking custom script -->
  <script src="static/js/script.js"></script>

<style>
  /* üî• Floating Button */
  .lucky-float-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: linear-gradient(135deg, #ff9800, #ff5722);
    color: white;
    font-size: 28px;
    text-align: center;
    text-decoration: none;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    line-height: 60px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    z-index: 999;
  }

  .lucky-float-btn:hover {
    transform: scale(1.1) rotate(10deg);
    background: linear-gradient(135deg, #ffb300, #f44336);
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  }

  @media (max-width: 768px) {
    .lucky-float-btn {
      bottom: 60px;
      right: 20px;
      font-size: 24px;
      width: 55px;
      height: 55px;
      line-height: 55px;
    }
  }
</style>
<script>
  const openSpin = document.getElementById("openSpin");
  const spinModal = document.getElementById("spinBox");
  const closeSpin = document.querySelector(".close-spin");
  const wheelCanvas = document.getElementById("wheelCanvas");
  const spinBtn = document.getElementById("spinBtn");
  const result = document.getElementById("result");
  const ctx = wheelCanvas.getContext("2d");

  const prizes = [
    "Gi·∫£m 10%", "Gi·∫£m 20%", "Gi·∫£m 30%", "C√°i n·ªãt",
    "Gi·∫£m 5%", "Gi·∫£m 50%", "C√°i n·ªãt", "Gi·∫£m 15%"
  ];

  const colors = ["#ff7675","#74b9ff","#55efc4","#ffeaa7","#fd79a8","#a29bfe","#fab1a0","#81ecec"];
  const slice = 360 / prizes.length;
  let startAngle = 0;
  let spinAngle = 0;
  let spinning = false;

  // üé® V·∫Ω v√≤ng quay
  function drawWheel() {
    for (let i = 0; i < prizes.length; i++) {
      const start = (slice * i) * Math.PI / 180;
      const end = (slice * (i + 1)) * Math.PI / 180;
      ctx.beginPath();
      ctx.moveTo(200, 200);
      ctx.arc(200, 200, 180, start, end);
      ctx.fillStyle = colors[i % colors.length];
      ctx.fill();
      ctx.save();

      ctx.translate(200, 200);
      ctx.rotate(start + slice * Math.PI / 360);
      ctx.textAlign = "right";
      ctx.fillStyle = "#fff";
      ctx.font = "bold 15px Poppins";
      ctx.fillText(prizes[i], 160, 10);
      ctx.restore();
    }
  }
  drawWheel();

  // üéØ Quay v√≤ng
  spinBtn.addEventListener("click", () => {
    if (spinning) return;
    spinning = true;
    result.textContent = "";
    
    const random = Math.floor(Math.random() * prizes.length);
    const finalAngle = 360 * 8 + (360 - random * slice - slice / 2);
    
    let current = 0;
    const duration = 4000;
    const startTime = performance.now();
    
    function animate(now) {
      const progress = Math.min((now - startTime) / duration, 1);
      spinAngle = finalAngle * easeOutCubic(progress);
      ctx.clearRect(0,0,400,400);
      ctx.save();
      ctx.translate(200,200);
      ctx.rotate((spinAngle * Math.PI / 180));
      ctx.translate(-200,-200);
      drawWheel();
      ctx.restore();
      
      if (progress < 1) requestAnimationFrame(animate);
      else {
        spinning = false;
        const won = prizes[random];
        result.innerHTML = won.includes("Ch√∫c") 
          ? "üò¢ " + won
          : "üéâ B·∫°n tr√∫ng: <b>" + won + "</b>";
      }
    }
    requestAnimationFrame(animate);
  });

  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

  // üß© Popup ƒëi·ªÅu khi·ªÉn
  openSpin.addEventListener("click", () => spinModal.style.display = "flex");
  closeSpin.addEventListener("click", () => spinModal.style.display = "none");
  window.addEventListener("click", e => {
    if (e.target === spinModal) spinModal.style.display = "none";
  });
</script>


</body>

</html>
