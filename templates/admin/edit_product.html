{% extends "admin.html" %}

{% block content %}
<div class="card shadow-sm p-4 bg-white">
  <h2 class="text-primary text-center mb-4">üìù C·∫≠p nh·∫≠t s·∫£n ph·∫©m</h2>

  <form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label fw-bold">T√™n s·∫£n ph·∫©m</label>
      <input type="text" name="product" class="form-control" value="{{ product.product }}" required>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label fw-bold">Gi√° (VND)</label>
        <input type="number" name="price" class="form-control" value="{{ product.price }}" required>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label fw-bold">S·ªë l∆∞·ª£ng</label>
        <input type="number" name="quantity" class="form-control" value="{{ product.quantity }}" required>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label fw-bold">T√°c gi·∫£</label>
      <input type="text" name="author" class="form-control" value="{{ product.author }}">
    </div>

    <div class="mb-3">
      <label class="form-label fw-bold">M√¥ t·∫£</label>
      <textarea name="description" class="form-control" rows="3">{{ product.description }}</textarea>
    </div>

    <div class="mb-3">
      <label class="form-label fw-bold">Th·ªÉ lo·∫°i</label>
      <select name="type" class="form-select" required>
        <option selected>{{ product.type or 'Ch∆∞a ch·ªçn' }}</option>
        {% for t in types %}
          {% if t.name.strip() != product.type %}
            <option value="{{ t.name }}">{{ t.name }}</option>
          {% endif %}
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label fw-bold">·∫¢nh hi·ªán t·∫°i</label><br>
      <img src="{{ product.image_url }}" alt="·∫¢nh hi·ªán t·∫°i" width="120" class="rounded border mb-2"><br>

      <label class="form-label fw-bold mt-2">Ch·ªçn ·∫£nh m·ªõi (n·∫øu mu·ªën thay)</label>
      <input type="file" name="image_file" class="form-control" accept="image/*">
      <input type="hidden" name="old_image_url" value="{{ product.image_url }}">
    </div>

    <div class="d-flex justify-content-between mt-4">
      <a href="{{ url_for('admin') }}" class="btn btn-secondary">‚¨ÖÔ∏è Quay l·∫°i</a>
      <button type="submit" class="btn btn-success">üíæ L∆∞u thay ƒë·ªïi</button>
    </div>
  </form>
</div>
{% endblock %}
