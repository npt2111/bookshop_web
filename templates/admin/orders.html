{% extends "admin.html" %}

{% block content %}
<style>
  .table-responsive {
    max-height: 750px;
    overflow-y: auto;
  }
  thead th {
    position: sticky;
    top: 0;
    background: #0d6efd;
    color: white;
    z-index: 5;
  }
</style>

<div class="card shadow-sm p-4 bg-white">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-primary mb-0">üì¶ Danh s√°ch ƒë∆°n h√†ng</h2>
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="text-center">
        <tr>
          <th style="width: 120px;">M√£ ƒë∆°n</th>
          <th>Kh√°ch h√†ng</th>
          <th style="width: 160px;">T·ªïng ti·ªÅn</th>
          <th style="width: 200px;">Ng√†y t·∫°o</th>
          <th style="width: 140px;">Tr·∫°ng th√°i</th>
          <th style="width: 160px;"></th>
        </tr>
      </thead>
      <tbody>
      {% for o in orders %}
        <tr>
          <td class="fw-bold text-center">
            <a href="{{ url_for('admin_order_detail', order_id=o.order_id) }}">{{ o.order_id }}</a>
          </td>
          <td>{{ o.name }}</td>
          <td class="text-danger fw-bold">{{ "{:,.0f}".format(o.total_amount|float) }}‚Ç´</td>
          <td>{{ o.created_at[:19] }}</td>
          <td class="text-center">
            {% if o.status == "pending" %}
              <span class="badge bg-warning text-dark">‚è≥ Ch·ªù x·ª≠ l√Ω</span>
            {% elif o.status == "accept" %}
              <span class="badge bg-success">‚úÖ Ch·∫•p nh·∫≠n</span>
            {% else %}
              <span class="badge bg-secondary">{{ o.status }}</span>
            {% endif %}
          </td>
          <td class="text-center">
            {% if o.status == "pending" %}
              <a href="{{ url_for('update_order_status', order_id=o.order_id) }}" class="btn btn-sm btn-primary">
                ‚úî X√°c nh·∫≠n
              </a>
            {% else %}
              <span class="text-success fw-bold">ƒê√£ xong</span>
            {% endif %}
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="6" class="text-center text-muted py-3">
            Kh√¥ng c√≥ ƒë∆°n h√†ng n√†o.
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
