<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üí≥ Thanh to√°n ƒë∆°n h√†ng</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <style>
    body { background: #f8f9fa; font-family: 'Poppins', sans-serif; padding-top: 60px; }
    .checkout-container { background: #fff; border-radius: 12px; padding: 25px; box-shadow: 0 6px 20px rgba(0,0,0,0.06); }
    .cart-item { border-bottom: 1px solid #eee; padding: 10px 0; }
    .cart-item img { width: 70px; height: 90px; object-fit: contain; border-radius: 8px; }
    .total-price { font-size: 1.3rem; font-weight: 700; color: #007bff; }
  </style>
</head>
<body>
<div class="container checkout-container">
  <h2 class="mb-4 text-center">üõçÔ∏è X√°c nh·∫≠n thanh to√°n</h2>

  <h5 class="mb-3">üßæ S·∫£n ph·∫©m b·∫°n ch·ªçn:</h5>
  {% for item in items %}
    <div class="cart-item d-flex align-items-center justify-content-between flex-wrap">
      <div class="d-flex align-items-center gap-3">
        <img src="{{ item.image_url }}" alt="{{ item.name }}">
        <div>
          <p class="fw-bold mb-0">{{ item.name }}</p>
          <p class="text-muted mb-0">S·ªë l∆∞·ª£ng: {{ item.quantity }}</p>
        </div>
      </div>
      <p class="fw-bold text-danger mb-0">{{ "{:,.0f}".format(item.price * item.quantity) }} VND</p>
    </div>
  {% endfor %}

  <hr>
  <p class="text-end total-price">
    T·ªïng c·ªông: {{ "{:,.0f}".format(items | sum(attribute='price')) }} VND
  </p>

  <form action="{{ url_for('process_checkout') }}" method="POST" class="mt-4">
    <h5 class="mb-3">üë§ Th√¥ng tin kh√°ch h√†ng</h5>

    <div class="mb-3">
      <label class="form-label">H·ªç t√™n</label>
      <input type="text" name="name" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" name="email" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
      <input type="tel" name="phone" class="form-control" pattern="[0-9]{9,11}" required>
    </div>

    <div class="mb-3">
      <label class="form-label">ƒê·ªãa ch·ªâ giao h√†ng</label>
      <textarea name="address" rows="2" class="form-control" required></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Ghi ch√∫</label>
      <textarea name="note" rows="2" class="form-control" placeholder="V√≠ d·ª•: Giao gi·ªù h√†nh ch√≠nh, kh√¥ng g·ªçi bu·ªïi s√°ng..."></textarea>
    </div>

    <div class="text-end">
      <button type="submit" class="btn btn-success">‚úÖ X√°c nh·∫≠n thanh to√°n</button>
      <a href="{{ url_for('cart') }}" class="btn btn-outline-secondary">‚¨ÖÔ∏è Quay l·∫°i gi·ªè h√†ng</a>
    </div>
  </form>
</div>
</body>
</html>
